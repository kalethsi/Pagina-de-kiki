<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Feliz Cumplea침os Amor 游눘</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Sacramento&family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Comic+Relief:wght@400;700&family=Sancreek&display=swap" rel="stylesheet" />

  <style>
    /* --- Reset y comportamiento de caja --- */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { background-color: #FFF8F2; }

    /* --- Tipograf칤as y ruptura de l칤neas --- */
    .cute-font { font-family: 'Sacramento', cursive; word-break: break-word; hyphens: auto; }
    .sancreek-regular { font-family: "Sancreek", serif; font-weight: 400; font-style: normal; word-break: break-word; hyphens: auto; }

    /* --- Colores y clases existentes (sin alterar l칩gica) --- */
    .main-pink { background-color: #F472B6; }
    .main-pink:hover { background-color: #EC4899; }

    /* --- Confetti --- */
    #confetti-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; }
    .confetti-piece { position: absolute; border-radius: 50%; opacity: 0.8; animation: fall linear infinite; }
    @keyframes fall {
      0% { transform: translateY(-100vh); opacity: 0; }
      10%,90% { opacity: 0.8; }
      100% { transform: translateY(100vh); opacity: 0; }
    }

    /* --- Ajustes responsivos generales para evitar solapamientos --- */
    #main-content-area h1.cute-font {
      /* override tailwind sizes con una escala fluida */
      font-size: clamp(2.2rem, 6.5vw, 4.8rem);
      line-height: 1;
      word-break: break-word;
    }
    #main-content-area p.sancreek-regular {
      font-size: clamp(1rem, 3.2vw, 1.75rem);
      line-height: 1.15;
    }

    #sanctuary-content-area h2.cute-font {
      font-size: clamp(1.6rem, 5.5vw, 3.2rem);
      line-height: 1.05;
      padding: 0.75rem;
    }

    /* Limitar el ancho de las barras para que no excedan pantallas peque침as */
    #sanctuary-content-area .max-w-md {
      max-width: min(95%, 420px);
    }

    /* Hacer el contenedor del video responsive y evitar overflow/solapamiento */
    #sanctuary-content-area .max-w-xs {
      max-width: min(90vw, 480px);
      width: 100%;
    }
    #sanctuary-content-area video {
      width: 100% !important;
      height: auto !important;
      max-height: 60vh;
      object-fit: contain;
      display: block;
      outline: none;
    }

    /* Botones: permitir wrapping y tama침os relativos para pantallas peque침as */
    #sanctuary-content-area .mb-6 {
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: center;
    }
    #sanctuary-content-area .mb-6 button {
      width: min(18vw, 84px);
      height: min(18vw, 84px);
      min-width: 60px;
      min-height: 60px;
      font-size: clamp(1rem, 3.5vw, 1.5rem);
    }

    /* Evitar que flex-shrink-0 impida que elementos se reduzcan en m칩viles */
    #sanctuary-content-area .flex-shrink-0 {
      flex-shrink: 1;
    }

    /* Caja modal (nombre) y mensaje flotante: asegurar que quepan en pantallas muy peque침as */
    #message-box {
      max-width: calc(100% - 2rem);
      width: auto;
      max-height: 90vh;
      overflow: auto;
      box-sizing: border-box;
    }

    #floating-message {
      max-width: calc(100% - 2rem);
      word-break: break-word;
      white-space: normal;
    }

    /* Peque침os ajustes visuales para evitar sombras/overflow que recorten contenido */
    .drop-shadow-2xl, .shadow-2xl { overflow: visible; }

    /* Media query adicional para m칩viles extra peque침os */
    @media (max-width: 400px) {
      #main-content-area h1.cute-font { font-size: clamp(1.8rem, 8.5vw, 3.2rem); }
      #main-content-area p.sancreek-regular { font-size: clamp(.95rem, 3.8vw, 1.25rem); }
      #sanctuary-content-area .mb-6 button { width: min(22vw, 76px); height: min(22vw, 76px); }
      #sanctuary-content-area h2.cute-font { padding: 0.5rem; font-size: clamp(1.4rem, 6.5vw, 2.4rem); }
    }
  </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 text-center relative overflow-y-auto">

  <div id="confetti-container"></div>

  <!-- Pantalla principal -->
  <div id="main-content-area" class="flex flex-col items-center justify-center min-h-screen w-full z-20">
    <div class="space-y-8 max-w-lg w-full">
      <h1 class="cute-font text-6xl sm:text-7xl md:text-8xl text-[#F472B6] leading-tight drop-shadow-lg">
        Feliz Cumplea침os Amor 游눘
      </h1>
      <p class="sancreek-regular text-2xl sm:text-3xl text-[#F472B6] leading-tight drop-shadow-lg">
        Hice esta p치gina con muchas frases para que me recuerdes.  
        La idea es que cuando sientas dolor o ansiedad,  
        puedas entrar aqu칤 para relajarte cuidando a  
        este capy (el capibara eres t칰 jsjs).
      </p>
      <button id="enter-button"
        class="main-pink text-white font-inter font-semibold py-4 px-8 rounded-full shadow-xl transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-2xl text-lg tracking-wider"
        style="font-family: 'Inter', sans-serif;">
        Entrar al santuario
      </button>
    </div>
  </div>

  <!-- Santuario -->
  <div id="sanctuary-content-area"
    class="hidden flex flex-col items-center justify-start w-full min-h-screen z-20 p-4 sm:p-8 gap-4 overflow-y-auto">

    <h2 id="capybara-display-name"
      class="cute-font text-5xl md:text-6xl text-[#F472B6] mt-6 p-4 bg-white/70 rounded-xl shadow-lg flex-shrink-0">
    </h2>

    <!-- Barras -->
    <div class="w-full max-w-md space-y-3 mt-4">
      <div class="w-full bg-gray-200 rounded-full h-5 overflow-hidden">
        <div id="hunger-bar" class="bg-green-500 h-full rounded-full transition-all duration-500" style="width:100%"></div>
      </div>
      <div class="w-full bg-gray-200 rounded-full h-5 overflow-hidden">
        <div id="sleep-bar" class="bg-blue-500 h-full rounded-full transition-all duration-500" style="width:100%"></div>
      </div>
      <div class="w-full bg-gray-200 rounded-full h-5 overflow-hidden">
        <div id="love-bar" class="bg-pink-400 h-full rounded-full transition-all duration-500" style="width:100%"></div>
      </div>
    </div>

    <!-- Video -->
    <div class="flex items-center justify-center w-full p-4 max-h-[60vh] flex-grow">
      <div class="w-full max-w-xs rounded-2xl shadow-2xl border-4 border-pink-300 overflow-hidden">
        <video id="capybara-video" src="1.mp4" class="w-full h-auto" playsinline preload="auto" style="display:block; outline:none;" loop></video>
      </div>
    </div>

    <!-- Botones -->
    <div class="mb-6 w-full flex justify-center space-x-4 px-4 flex-shrink-0">
      <button id="btn-hunger" class="w-20 h-20 rounded-full shadow-xl transition duration-300 transform hover:scale-105 hover:shadow-2xl text-2xl bg-green-500 hover:bg-green-600 text-white flex items-center justify-center font-inter font-semibold">游꼒</button>
      <button id="btn-sleep" class="w-20 h-20 rounded-full shadow-xl transition duration-300 transform hover:scale-105 hover:shadow-2xl text-2xl bg-blue-500 hover:bg-blue-600 text-white flex items-center justify-center font-inter font-semibold">游땺</button>
      <button id="btn-love" class="w-20 h-20 rounded-full shadow-xl transition duration-300 transform hover:scale-105 hover:shadow-2xl text-2xl main-pink text-white flex items-center justify-center font-inter font-semibold">游눘</button>
    </div>
  </div>

  <!-- Caja nombre -->
  <div id="message-box"
    class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-xl shadow-2xl z-50 hidden max-w-sm w-full border-4 border-[#F472B6] drop-shadow-2xl">
    <h3 class="text-xl font-bold text-[#F472B6] mb-4">춰Sorpresa!</h3>
    <p class="text-gray-700 mb-6">춰Bienvenido al santuario! Escoge el nombre de tu capibara:</p>
    <input type="text" id="capybara-name" placeholder="Ej: Capy, Pelus칤n, Amor"
      class="w-full px-4 py-3 mb-6 border-2 border-pink-200 rounded-lg focus:outline-none focus:border-[#F472B6] transition duration-200" maxlength="20" />
    <button id="enter-sanctuary-button" class="main-pink text-white font-semibold py-2 px-6 rounded-full w-full">Entrar</button>
  </div>

  <!-- Mensaje flotante -->
  <div id="floating-message"
    class="fixed top-6 left-1/2 transform -translate-x-1/2 bg-white/80 text-[#F472B6] rounded-xl px-6 py-3 text-2xl shadow-lg z-50 hidden transition-opacity duration-500"
    style="font-family: 'Inter', cursive;">
  </div>

  <audio id="bg-music" src="1.mp3" autoplay loop hidden></audio>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('confetti-container');
      const button = document.getElementById('enter-button');
      const messageBox = document.getElementById('message-box');
      const mainContent = document.getElementById('main-content-area');
      const sanctuaryContent = document.getElementById('sanctuary-content-area');
      const enterSanctuaryButton = document.getElementById('enter-sanctuary-button');
      const capybaraNameInput = document.getElementById('capybara-name');
      const capybaraDisplayName = document.getElementById('capybara-display-name');
      const capybaraVideo = document.getElementById('capybara-video');
      const hungerBar = document.getElementById('hunger-bar');
      const sleepBar = document.getElementById('sleep-bar');
      const loveBar = document.getElementById('love-bar');
      const floatingMessage = document.getElementById('floating-message');

      const [hungerButton, sleepButton, loveButton] = document.querySelectorAll('#sanctuary-content-area button');
      const pastelColors = ['#FFC0CB', '#ADD8E6', '#FAFAD2', '#90EE90', '#DDA0DD', '#FFE4B5'];
      const NUM_CONFETTI = 60;

      function createConfettiPiece() {
        const piece = document.createElement('div');
        piece.classList.add('confetti-piece');
        const color = pastelColors[Math.floor(Math.random() * pastelColors.length)];
        piece.style.backgroundColor = color;
        const size = Math.random() * 10 + 5;
        piece.style.width = `${size}px`;
        piece.style.height = `${size}px`;
        piece.style.left = `${Math.random() * 100}vw`;
        piece.style.animationDuration = `${Math.random() * 15 + 10}s`;
        piece.style.animationDelay = `-${Math.random() * 10}s`;
        container.appendChild(piece);
        piece.addEventListener('animationend', () => {
          piece.remove();
          createConfettiPiece();
        });
      }
      for (let i = 0; i < NUM_CONFETTI; i++) createConfettiPiece();

      button.addEventListener('click', () => {
        messageBox.classList.remove('hidden');
        capybaraNameInput.focus();
      });

      enterSanctuaryButton.addEventListener('click', () => {
        let name = capybaraNameInput.value.trim() || "Capy";
        messageBox.classList.add('hidden');
        mainContent.classList.add('hidden');
        sanctuaryContent.classList.remove('hidden');
        capybaraDisplayName.textContent = name;
        capybaraVideo.play().catch(console.warn);
        const bg = document.getElementById('bg-music');
        bg.volume = 0.4;
        bg.play().catch(console.warn);
      });

      document.addEventListener('keydown', e => { if (e.key === 'Escape') messageBox.classList.add('hidden'); });

      function showFloatingMessage(messages) {
        const msg = messages[Math.floor(Math.random() * messages.length)];
        floatingMessage.textContent = msg;
        floatingMessage.classList.remove('hidden');
        floatingMessage.style.opacity = '1';
        setTimeout(() => {
          floatingMessage.style.opacity = '0';
          setTimeout(() => floatingMessage.classList.add('hidden'), 500);
        }, 8000);
      }

      // 游꿟 Control de videos
      let defaultVideo = '1.mp4', videoHambre = '3.mp4', videoSue침o = '4.mp4', videoAmor = '2.mp4';
      let currentMode = null;
      function playSpecialVideo(src, mode) {
        if (currentMode) { capybaraVideo.pause(); capybaraVideo.currentTime = 0; }
        capybaraVideo.src = src;
        capybaraVideo.loop = false;
        currentMode = mode;
        capybaraVideo.play().catch(console.warn);
      }

      hungerButton.addEventListener('click', () => { updateBar(hungerBar, 10); playSpecialVideo(videoHambre, "hambre"); showFloatingMessage(["Come algo rico 游땖游"]); });
      sleepButton.addEventListener('click', () => { updateBar(sleepBar, 10); playSpecialVideo(videoSue침o, "sue침o"); showFloatingMessage(["Duerme rico mi amor 游땺游눘"]); });
      loveButton.addEventListener('click', () => { updateBar(loveBar, 10); playSpecialVideo(videoAmor, "amor"); showFloatingMessage(["Te amo mocosa 游눗"]); });

      capybaraVideo.addEventListener('ended', () => {
        if (currentMode) {
          currentMode = null;
          capybaraVideo.src = defaultVideo;
          capybaraVideo.loop = true;
          capybaraVideo.play().catch(() => {});
        }
      });

      function updateBar(bar, amount) {
        let width = parseFloat(bar.style.width);
        width = Math.max(0, Math.min(100, width + amount));
        bar.style.width = width + '%';
      }

      function decreaseBar(bar, amount, interval) {
        setInterval(() => updateBar(bar, -amount), interval);
      }

      decreaseBar(hungerBar, 1, 5000);
      decreaseBar(sleepBar, 1, 9000);
      decreaseBar(loveBar, 1, 1000);
    });
  </script>
</body>
</html>
